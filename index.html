<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìö Biblioteca de C√≥mics y Mangas</title>
    <style>
        /* Estilos CSS */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: #212121;
            color: #EAEAEA;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem 0;
            text-align: center;
            margin-bottom: 2rem;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        /* Navigation */
        .nav {
            background: #333;
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 2rem;
            display: flex;
            justify-content: center;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .nav-btn {
            background: #4CAF50;
            color: white;
            padding: 12px 24px;
            text-decoration: none;
            border-radius: 6px;
            font-weight: bold;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .nav-btn:hover {
            background: #45a049;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
        }

        .nav-btn.admin {
            background: #2196F3;
        }

        .nav-btn.admin:hover {
            background: #1976D2;
        }

        /* Series Section */
        .series-section {
            margin-bottom: 3rem;
        }

        .series-title {
            font-size: 2rem;
            color: #FFC107;
            border-bottom: 3px solid #FFC107;
            padding-bottom: 10px;
            margin-bottom: 1.5rem;
            display: inline-block;
        }

        .series-description {
            color: #BBB;
            margin-bottom: 1.5rem;
            font-size: 1.1rem;
        }

        /* Chapters Grid */
        .chapters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .chapter-card {
            background: #333;
            border-radius: 8px;
            overflow: hidden;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .chapter-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
            border-color: #4CAF50;
        }

        .chapter-link {
            display: block;
            padding: 1.5rem;
            color: #EAEAEA;
            text-decoration: none;
            height: 100%;
            position: relative;
        }

        .chapter-number {
            font-size: 0.9rem;
            color: #4CAF50;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .chapter-title {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .chapter-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 1rem;
        }

        .chapter-date {
            font-size: 0.8rem;
            color: #999;
        }

        .chapter-badge {
            background: #FF5722;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.7rem;
            font-weight: bold;
        }

        /* Chapter Viewer */
        .chapter-viewer {
            display: none;
            background: #1a1a1a;
            border-radius: 12px;
            overflow: hidden;
        }

        .chapter-viewer.active {
            display: block;
        }

        .viewer-header {
            background: #333;
            padding: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid #444;
        }

        .viewer-title {
            font-size: 1.3rem;
            font-weight: bold;
        }

        .viewer-controls {
            display: flex;
            gap: 1rem;
        }

        .control-btn {
            background: #555;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .control-btn:hover {
            background: #666;
        }

        .control-btn.active {
            background: #4CAF50;
        }

        .viewer-content {
            padding: 2rem;
            text-align: center;
            max-height: 80vh;
            overflow-y: auto;
        }

        .manga-page {
            max-width: 100%;
            height: auto;
            margin-bottom: 1rem;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }

        /* Floating Menu */
        .floating-menu {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: #333;
            padding: 1rem;
            border-radius: 12px;
            display: none;
            z-index: 1000;
            box-shadow: 0 8px 25px rgba(0,0,0,0.5);
            border: 2px solid #4CAF50;
        }

        .floating-menu.active {
            display: flex;
            gap: 0.5rem;
        }

        .menu-btn {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 10px 16px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            white-space: nowrap;
        }

        .menu-btn:hover {
            background: #45a049;
        }

        .menu-btn.secondary {
            background: #2196F3;
        }

        .menu-btn.secondary:hover {
            background: #1976D2;
        }

        /* Speed Control */
        .speed-control {
            position: fixed;
            top: 50%;
            right: 20px;
            transform: translateY(-50%);
            background: #333;
            padding: 1rem;
            border-radius: 8px;
            display: none;
            z-index: 1001;
            box-shadow: 0 4px 12px rgba(0,0,0,0.5);
        }

        .speed-control.active {
            display: block;
        }

        .speed-slider {
            width: 150px;
            margin: 10px 0;
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 3rem;
            background: #333;
            border-radius: 12px;
            color: #999;
        }

        .empty-state h3 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
            color: #EAEAEA;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            .header h1 {
                font-size: 2rem;
            }

            .chapters-grid {
                grid-template-columns: 1fr;
            }

            .viewer-controls {
                flex-wrap: wrap;
                gap: 0.5rem;
            }

            .floating-menu {
                flex-wrap: wrap;
                justify-content: center;
                bottom: 10px;
                left: 10px;
                right: 10px;
                transform: none;
            }

            .speed-control {
                right: 10px;
            }
        }

        /* Loading */
        .loading {
            text-align: center;
            padding: 2rem;
            color: #999;
        }

        .spinner {
            border: 4px solid #333;
            border-top: 4px solid #4CAF50;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1>üìö Biblioteca de C√≥mics y Mangas</h1>
            <p>Explora tus series favoritas</p>
        </header>

        <!-- Navigation -->
        <nav class="nav">
            <a href="#" class="nav-btn" onclick="showHome()">
                üè† Inicio
            </a>
            <a href="#" class="nav-btn admin" onclick="showAdmin()">
                ‚öôÔ∏è Panel de Administraci√≥n
            </a>
        </nav>

        <!-- Main Content -->
        <div id="main-content">
            <!-- Home View -->
            <div id="home-view">
                <div class="loading">
                    <div class="spinner"></div>
                    <p>Cargando series...</p>
                </div>
            </div>

            <!-- Admin View -->
            <div id="admin-view" style="display: none;">
                <div class="series-section">
                    <h2 class="series-title">‚ûï Crear Nueva Serie</h2>
                    <div style="background: #333; padding: 2rem; border-radius: 8px; margin-bottom: 2rem;">
                        <div style="margin-bottom: 1rem;">
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: bold;">T√≠tulo de la Serie:</label>
                            <input type="text" id="series-title" placeholder="Ej: Tengo una Mansi√≥n en un Mundo Post Apocal√≠ptico" 
                                   style="width: 100%; padding: 12px; border: none; border-radius: 6px; background: #444; color: white; font-size: 1rem;">
                        </div>
                        <div style="margin-bottom: 1rem;">
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: bold;">Descripci√≥n:</label>
                            <textarea id="series-description" placeholder="Descripci√≥n de la serie..." 
                                      style="width: 100%; padding: 12px; border: none; border-radius: 6px; background: #444; color: white; font-size: 1rem; min-height: 100px; resize: vertical;"></textarea>
                        </div>
                        <button onclick="createSeries()" style="background: #4CAF50; color: white; border: none; padding: 12px 24px; border-radius: 6px; font-size: 1rem; font-weight: bold; cursor: pointer;">
                            ‚ûï Crear Serie
                        </button>
                    </div>
                </div>

                <div class="series-section">
                    <h2 class="series-title">üìö Series Existentes</h2>
                    <div id="admin-series-list">
                        <div class="loading">
                            <div class="spinner"></div>
                            <p>Cargando series...</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Chapter Viewer -->
            <div id="chapter-viewer" class="chapter-viewer">
                <div class="viewer-header">
                    <div class="viewer-title" id="viewer-title">Cap√≠tulo</div>
                    <div class="viewer-controls">
                        <button class="control-btn" onclick="toggleAutoScroll()" id="autoscroll-btn">‚ñ∂Ô∏è Auto-Scroll</button>
                        <button class="control-btn" onclick="toggleSpeedControl()" id="speed-btn">‚ö° Velocidad</button>
                        <button class="control-btn" onclick="toggleMenu()" id="menu-btn">üìã Men√∫</button>
                        <button class="control-btn" onclick="showHome()">üè† Inicio</button>
                    </div>
                </div>
                <div class="viewer-content" id="viewer-content">
                    <!-- Chapter images will be loaded here -->
                </div>
            </div>
        </div>

        <!-- Floating Menu -->
        <div class="floating-menu" id="floating-menu">
            <button class="menu-btn" onclick="previousChapter()">‚¨ÖÔ∏è Anterior</button>
            <button class="menu-btn" onclick="toggleAutoScroll()" id="float-autoscroll-btn">‚ñ∂Ô∏è Auto-Scroll</button>
            <button class="menu-btn secondary" onclick="toggleSpeedControl()" id="float-speed-btn">‚ö° Velocidad</button>
            <button class="menu-btn secondary" onclick="nextChapter()">Siguiente ‚û°Ô∏è</button>
        </div>

        <!-- Speed Control -->
        <div class="speed-control" id="speed-control">
            <h4 style="margin-bottom: 1rem; color: white;">‚ö° Control de Velocidad</h4>
            <input type="range" class="speed-slider" id="speed-slider" min="1" max="10" value="3">
            <div style="color: #999; font-size: 0.9rem; margin-top: 0.5rem;">
                Velocidad: <span id="speed-value">3</span>
            </div>
        </div>
    </div>

    <script>
        // Data Storage
        let seriesData = [];
        let currentChapter = null;
        let currentChapterIndex = 0;
        let autoScrollInterval = null;
        let scrollSpeed = 3;

        // Initialize with sample data
        function initializeApp() {
            // Sample data - you can modify this
            seriesData = [
                {
                    id: 1,
                    title: "Tengo una Mansi√≥n en un Mundo Post Apocal√≠ptico",
                    description: "Una historia de supervivencia y aventura en un mundo devastado donde el protagonista encuentra una misteriosa mansi√≥n que podr√≠a cambiar su destino.",
                    slug: "mansion-post-apocaliptico",
                    chapters: [
                        {
                            id: 1,
                            title: "El Comienzo del Fin",
                            slug: "001-el-comienzo-del-fin",
                            chapterNumber: 1,
                            images: [
                                "https://i.imgur.com/uR1l3gL.jpg",
                                "https://i.imgur.com/example2.jpg",
                                "https://i.imgur.com/example3.jpg"
                            ],
                            isPublished: true,
                            createdAt: "2025-12-15"
                        },
                        {
                            id: 2,
                            title: "Los Misterios de la Mansi√≥n",
                            slug: "002-los-misterios-de-la-mansion",
                            chapterNumber: 2,
                            images: [
                                "https://i.imgur.com/example4.jpg",
                                "https://i.imgur.com/example5.jpg"
                            ],
                            isPublished: true,
                            createdAt: "2025-12-15"
                        },
                        {
                            id: 3,
                            title: "Secretos Revelados",
                            slug: "003-secretos-revelados",
                            chapterNumber: 3,
                            images: [
                                "https://i.imgur.com/example6.jpg",
                                "https://i.imgur.com/example7.jpg"
                            ],
                            isPublished: true,
                            createdAt: "2025-12-15"
                        }
                    ]
                },
                {
                    id: 2,
                    title: "Emperador M√°gico",
                    description: "La historia de un joven emperador que descubre sus poderes m√°gicos y debe proteger su reino.",
                    slug: "emperador-magico",
                    chapters: [
                        {
                            id: 4,
                            title: "Cap√≠tulos 1-3",
                            slug: "emperador-capitulo-1-3",
                            chapterNumber: 1,
                            images: [
                                "https://i.imgur.com/magic1.jpg",
                                "https://i.imgur.com/magic2.jpg"
                            ],
                            isPublished: true,
                            createdAt: "2025-12-15"
                        }
                    ]
                },
                {
                    id: 3,
                    title: "Mat√≥n a Cargo",
                    description: "Las aventuras de un mat√≥n que descubre que hay m√°s poder en ser amable que en ser temido.",
                    slug: "maton-a-cargo",
                    chapters: [
                        {
                            id: 5,
                            title: "El Primer D√≠a",
                            slug: "maton-primer-dia",
                            chapterNumber: 1,
                            images: [
                                "https://i.imgur.com/bully1.jpg"
                            ],
                            isPublished: true,
                            createdAt: "2025-12-15"
                        }
                    ]
                }
            ];

            // Load from localStorage if available
            const savedData = localStorage.getItem('mangaLibraryData');
            if (savedData) {
                try {
                    seriesData = JSON.parse(savedData);
                } catch (e) {
                    console.error('Error loading saved data:', e);
                }
            }

            showHome();
        }

        // View Management
        function showHome() {
            hideAllViews();
            document.getElementById('home-view').style.display = 'block';
            renderHome();
        }

        function showAdmin() {
            hideAllViews();
            document.getElementById('admin-view').style.display = 'block';
            renderAdmin();
        }

        function hideAllViews() {
            document.getElementById('home-view').style.display = 'none';
            document.getElementById('admin-view').style.display = 'none';
            document.getElementById('chapter-viewer').classList.remove('active');
            document.getElementById('floating-menu').classList.remove('active');
            document.getElementById('speed-control').classList.remove('active');
            stopAutoScroll();
        }

        // Render Functions
        function renderHome() {
            const homeView = document.getElementById('home-view');
            
            if (seriesData.length === 0) {
                homeView.innerHTML = `
                    <div class="empty-state">
                        <h3>üìö No hay series disponibles</h3>
                        <p>Comienza creando tu primera serie en el panel de administraci√≥n</p>
                        <button class="nav-btn admin" onclick="showAdmin()" style="margin-top: 1rem;">
                            ‚öôÔ∏è Ir al Panel de Administraci√≥n
                        </button>
                    </div>
                `;
                return;
            }

            let html = '';
            seriesData.forEach(series => {
                const publishedChapters = series.chapters.filter(ch => ch.isPublished);
                
                html += `
                    <div class="series-section">
                        <h2 class="series-title">${series.title.toUpperCase()}</h2>
                        ${series.description ? `<p class="series-description">${series.description}</p>` : ''}
                        
                        ${publishedChapters.length > 0 ? `
                            <div class="chapters-grid">
                                ${publishedChapters
                                    .sort((a, b) => b.chapterNumber - a.chapterNumber)
                                    .map((chapter, index) => `
                                        <div class="chapter-card">
                                            <a href="#" onclick="openChapter(${series.id}, ${chapter.id})" class="chapter-link">
                                                <div class="chapter-number">Cap√≠tulo ${chapter.chapterNumber}</div>
                                                <div class="chapter-title">${chapter.title}</div>
                                                <div class="chapter-meta">
                                                    <span class="chapter-date">${chapter.createdAt}</span>
                                                    ${index === 0 ? '<span class="chapter-badge">NUEVO</span>' : ''}
                                                </div>
                                            </a>
                                        </div>
                                    `).join('')}
                            </div>
                        ` : `
                            <div class="empty-state">
                                <h3>No hay cap√≠tulos publicados</h3>
                                <p>Esta serie a√∫n no tiene cap√≠tulos disponibles</p>
                            </div>
                        `}
                    </div>
                `;
            });

            homeView.innerHTML = html;
        }

        function renderAdmin() {
            const adminSeriesList = document.getElementById('admin-series-list');
            
            if (seriesData.length === 0) {
                adminSeriesList.innerHTML = `
                    <div class="empty-state">
                        <h3>No hay series creadas</h3>
                        <p>Usa el formulario superior para crear tu primera serie</p>
                    </div>
                `;
                return;
            }

            let html = '';
            seriesData.forEach(series => {
                html += `
                    <div class="chapter-card" style="margin-bottom: 1rem;">
                        <div style="padding: 1.5rem;">
                            <h3 style="color: #4CAF50; margin-bottom: 0.5rem;">${series.title}</h3>
                            <p style="color: #BBB; margin-bottom: 1rem;">${series.description || 'Sin descripci√≥n'}</p>
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <span style="color: #999;">${series.chapters.length} cap√≠tulos</span>
                                <div>
                                    <button class="control-btn" onclick="editSeries(${series.id})" style="margin-right: 0.5rem;">‚úèÔ∏è Editar</button>
                                    <button class="control-btn" onclick="deleteSeries(${series.id})" style="background: #f44336;">üóëÔ∏è Eliminar</button>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            });

            adminSeriesList.innerHTML = html;
        }

        // Chapter Management
        function openChapter(seriesId, chapterId) {
            const series = seriesData.find(s => s.id === seriesId);
            const chapter = series.chapters.find(c => c.id === chapterId);
            
            if (!chapter || !chapter.images || chapter.images.length === 0) {
                alert('Este cap√≠tulo no tiene im√°genes disponibles');
                return;
            }

            currentChapter = chapter;
            currentChapterIndex = series.chapters.findIndex(c => c.id === chapterId);
            
            hideAllViews();
            document.getElementById('chapter-viewer').classList.add('active');
            document.getElementById('viewer-title').textContent = `${series.title} - ${chapter.title}`;
            
            renderChapter(chapter);
        }

        function renderChapter(chapter) {
            const viewerContent = document.getElementById('viewer-content');
            
            let html = '';
            chapter.images.forEach((imageUrl, index) => {
                html += `
                    <img src="${imageUrl}" 
                         alt="P√°gina ${index + 1}" 
                         class="manga-page"
                         onload="this.style.opacity='1'"
                         style="opacity: 0; transition: opacity 0.3s ease;">
                `;
            });

            viewerContent.innerHTML = html;
        }

        // Navigation
        function previousChapter() {
            // Find current series and chapter
            for (let series of seriesData) {
                const chapterIndex = series.chapters.findIndex(c => c.id === currentChapter.id);
                if (chapterIndex !== -1 && chapterIndex > 0) {
                    const prevChapter = series.chapters[chapterIndex - 1];
                    if (prevChapter.isPublished) {
                        openChapter(series.id, prevChapter.id);
                        return;
                    }
                }
            }
            alert('No hay cap√≠tulo anterior');
        }

        function nextChapter() {
            // Find current series and chapter
            for (let series of seriesData) {
                const chapterIndex = series.chapters.findIndex(c => c.id === currentChapter.id);
                if (chapterIndex !== -1 && chapterIndex < series.chapters.length - 1) {
                    const nextChapter = series.chapters[chapterIndex + 1];
                    if (nextChapter.isPublished) {
                        openChapter(series.id, nextChapter.id);
                        return;
                    }
                }
            }
            alert('No hay cap√≠tulo siguiente');
        }

        // Auto-scroll Controls
        function toggleAutoScroll() {
            const btn = document.getElementById('autoscroll-btn');
            const floatBtn = document.getElementById('float-autoscroll-btn');
            
            if (autoScrollInterval) {
                stopAutoScroll();
                btn.textContent = '‚ñ∂Ô∏è Auto-Scroll';
                btn.classList.remove('active');
                if (floatBtn) floatBtn.textContent = '‚ñ∂Ô∏è Auto-Scroll';
            } else {
                startAutoScroll();
                btn.textContent = '‚è∏Ô∏è Detener';
                btn.classList.add('active');
                if (floatBtn) floatBtn.textContent = '‚è∏Ô∏è Detener';
            }
        }

        function startAutoScroll() {
            const viewerContent = document.getElementById('viewer-content');
            autoScrollInterval = setInterval(() => {
                viewerContent.scrollBy({
                    top: scrollSpeed,
                    behavior: 'smooth'
                });
            }, 50);
        }

        function stopAutoScroll() {
            if (autoScrollInterval) {
                clearInterval(autoScrollInterval);
                autoScrollInterval = null;
            }
        }

        // Speed Control
        function toggleSpeedControl() {
            const speedControl = document.getElementById('speed-control');
            speedControl.classList.toggle('active');
        }

        function updateSpeed(value) {
            scrollSpeed = parseInt(value);
            document.getElementById('speed-value').textContent = value;
            
            // Restart auto-scroll if it was active
            if (autoScrollInterval) {
                stopAutoScroll();
                startAutoScroll();
            }
        }

        // Menu Controls
        function toggleMenu() {
            const menu = document.getElementById('floating-menu');
            menu.classList.toggle('active');
        }

        // Series Management
        function createSeries() {
            const title = document.getElementById('series-title').value.trim();
            const description = document.getElementById('series-description').value.trim();
            
            if (!title) {
                alert('Por favor, ingresa un t√≠tulo para la serie');
                return;
            }

            const newSeries = {
                id: Date.now(),
                title: title,
                description: description,
                slug: title.toLowerCase().replace(/[^a-z0-9]+/g, '-').replace(/(^-|-$)/g, ''),
                chapters: []
            };

            seriesData.push(newSeries);
            saveData();
            
            // Clear form
            document.getElementById('series-title').value = '';
            document.getElementById('series-description').value = '';
            
            alert('Serie creada exitosamente');
            renderAdmin();
        }

        function editSeries(seriesId) {
            const series = seriesData.find(s => s.id === seriesId);
            if (!series) return;
            
            const newTitle = prompt('Editar t√≠tulo de la serie:', series.title);
            if (newTitle && newTitle.trim()) {
                series.title = newTitle.trim();
                saveData();
                renderAdmin();
            }
        }

        function deleteSeries(seriesId) {
            if (!confirm('¬øEst√°s seguro de que quieres eliminar esta serie? Esta acci√≥n no se puede deshacer.')) {
                return;
            }
            
            const index = seriesData.findIndex(s => s.id === seriesId);
            if (index !== -1) {
                seriesData.splice(index, 1);
                saveData();
                renderAdmin();
            }
        }

        // Data Persistence
        function saveData() {
            try {
                localStorage.setItem('mangaLibraryData', JSON.stringify(seriesData));
            } catch (e) {
                console.error('Error saving data:', e);
                alert('Error al guardar los datos. El almacenamiento local podr√≠a estar lleno.');
            }
        }

        // Event Listeners
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
            
            // Speed slider
            const speedSlider = document.getElementById('speed-slider');
            if (speedSlider) {
                speedSlider.addEventListener('input', function() {
                    updateSpeed(this.value);
                });
            }
            
            // Keyboard shortcuts
            document.addEventListener('keydown', function(e) {
                if (!currentChapter) return;
                
                switch(e.key) {
                    case 'ArrowLeft':
                        previousChapter();
                        break;
                    case 'ArrowRight':
                        nextChapter();
                        break;
                    case ' ':
                        e.preventDefault();
                        toggleAutoScroll();
                        break;
                    case 'Escape':
                        showHome();
                        break;
                }
            });
        });

        // Show floating menu when viewing chapter
        document.addEventListener('scroll', function() {
            const viewer = document.getElementById('chapter-viewer');
            const menu = document.getElementById('floating-menu');
            
            if (viewer && viewer.classList.contains('active')) {
                const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                if (scrollTop > 200) {
                    menu.classList.add('active');
                } else {
                    menu.classList.remove('active');
                }
            }
        });
    </script>
</body>
</html>